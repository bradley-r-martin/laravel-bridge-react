var W=Object.defineProperty;var r=(e,n)=>W(e,"name",{value:n,configurable:!0});import{r as p,j as t,F as q,b as u}from"./jsx-runtime.8822f16e.js";import{a as Q,h as G,b as J,c as X,C as U,d as Y,e as $,f as Z,l as A,S as P,B as K}from"./Bridge.cdc765e4.js";import"./iframe.d3fe4388.js";let v;const ee=new Uint8Array(16);function te(){if(!v&&(v=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(ee)}r(te,"rng");const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function ne(e,n=0){return(c[e[n+0]]+c[e[n+1]]+c[e[n+2]]+c[e[n+3]]+"-"+c[e[n+4]]+c[e[n+5]]+"-"+c[e[n+6]]+c[e[n+7]]+"-"+c[e[n+8]]+c[e[n+9]]+"-"+c[e[n+10]]+c[e[n+11]]+c[e[n+12]]+c[e[n+13]]+c[e[n+14]]+c[e[n+15]]).toLowerCase()}r(ne,"unsafeStringify");const re=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:re};function oe(e,n,o){if(M.randomUUID&&!n&&!e)return M.randomUUID();e=e||{};const l=e.random||(e.rng||te)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,n){o=o||0;for(let s=0;s<16;++s)n[o+s]=l[s];return n}return ne(l)}r(oe,"v4");function se(){const e=p.exports.useContext(Q);if(!e)throw new Error("You cannot use useBridge outside of a Bridge component");return e}r(se,"useBridge$1");const ae=p.exports.createContext(null),j=p.exports.createContext(null),b=r(e=>{const{children:n,...o}=e,l=p.exports.useMemo(()=>oe(),[]),s=se();p.exports.useState(!1);const[x,g]=G(),[a,_]=J(),[y,R]=X(),d=p.exports.useRef({dispatchStatus:R,dispatchData:_,dispatchExceptions:g,data:a,props:e,uuid:l});d.current.dispatchStatus=R,d.current.dispatchData=_,d.current.dispatchExceptions=g,d.current.data=a,d.current.props=o,d.current.uuid=l;function D(i,f){return new Promise(w=>s.call(d,i,f).then(w))}r(D,"call");function N(){return new Promise(i=>s.sync(d).then(i))}r(N,"sync");function I(){return new Promise(i=>s.fresh(d).then(i))}r(I,"fresh");function k(){return new Promise(i=>s.mount(d).then(i))}r(k,"mount");function O(){return new Promise(i=>s.unmount(d).then(i))}r(O,"unmount");function T(){return new Promise(i=>s.register(d).then(i))}r(T,"register");function L(){return new Promise(i=>s.deregister(d).then(i))}r(L,"deregister");function z(i,f,w=!1){if(_({type:Z.SET,name:i,value:f}),w)return new Promise(H=>{setTimeout(()=>{N().then(H)},1)})}r(z,"setData");function V(i,f){return A.exports.get(a,i,f)}r(V,"getData");function F(i){return A.exports.get(x,i)}return r(F,"getExceptions"),p.exports.useEffect(()=>(T(),()=>{L()}),[d]),p.exports.useEffect(()=>(y.isRegistered&&k(),()=>{y.isRegistered||O()}),[y.isRegistered]),t(j.Provider,{value:{call:D,fresh:I,mount:k,unmount:O,register:T,deregister:L,sync:N},children:t(ae.Provider,{value:{call:D,fresh:I,sync:N},children:t(U.Provider,{value:y,children:t(Y.Provider,{value:[a,z,V],children:t($.Provider,{value:[x,F],children:n})})})})})},"Controller"),ie=b;try{b.displayName="Controller",b.__docgenInfo={description:"",displayName:"Controller",props:{controller:{defaultValue:null,description:"",name:"controller",required:!0,type:{name:"string"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Controller/Controller.tsx#Controller"]={docgenInfo:b.__docgenInfo,name:"Controller",path:"src/components/Controller/Controller.tsx#Controller"})}catch{}const S=r(e=>{const{show:n}=e;return n?t("svg",{className:"h-3 w-3 text-slate-500",viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",children:u("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2",children:[u("circle",{cx:"22",cy:"22",r:"1",children:[t("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]}),u("circle",{cx:"22",cy:"22",r:"1",children:[t("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),t("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]})]})}):t(q,{})},"LoadingIndicator");try{S.displayName="LoadingIndicator",S.__docgenInfo={description:"",displayName:"LoadingIndicator",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}}}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/examples/LoadingIndicator.tsx#LoadingIndicator"]={docgenInfo:S.__docgenInfo,name:"LoadingIndicator",path:"src/examples/LoadingIndicator.tsx#LoadingIndicator"})}catch{}function m(){const e=p.exports.useContext(j);if(!e)throw new Error("You cannot use useController outside of a Controller component");return e}r(m,"useController");function le(){const e=p.exports.useContext(Y);if(!e)throw new Error("You cannot use useData outside of a Controller component");return e}r(le,"useData");function ce(){const e=p.exports.useContext($);if(!e)throw new Error("You cannot use useExceptions outside of a Controller component");return e}r(ce,"useExceptions");function C(){const e=p.exports.useContext(U);if(!e)throw new Error("You cannot use useStatus outside of a Controller component");return e}r(C,"useStatus");const h=r(({onClick:e,active:n,children:o})=>{const[l,s]=p.exports.useState(!1);return u("button",{disabled:l,className:`${n?"bg-slate-100 text-slate-400 pointer-events-none":"bg-slate-200 hover:bg-slate-300 text-slate-600"} px-2 p-1 flex items-center justify-center space-x-2 relative text-xs`,onClick:()=>{s(!0),e().then(()=>s(!1))},children:[t(S,{show:l}),t("span",{children:o})]})},"Button"),de=r(()=>{const{call:e}=m();return t(h,{onClick:()=>new Promise(n=>{e("test",{some:"data"}).then(o=>{console.log("CALL response",o),n(0)})}),children:"Call"})},"CallButton"),ue=r(()=>{const{mount:e}=m(),{isMounted:n,isMounting:o}=C();return t(h,{ping:o,active:n,onClick:e,children:"Mount"})},"MountButton"),pe=r(()=>{const{unmount:e}=m(),{isMounted:n,isUnmounting:o}=C();return t(h,{ping:o,active:!n,onClick:e,children:"Unmount"})},"UnmountButton"),ge=r(()=>{const{register:e}=m(),{isRegistered:n,isRegistering:o}=C();return t(h,{ping:o,active:n,onClick:e,children:"Register"})},"RegisterButton"),xe=r(()=>{const{deregister:e}=m(),{isRegistered:n,isDeregistering:o}=C();return t(h,{ping:o,active:!n,onClick:e,children:"Deregister"})},"DeregisterButton"),me=r(()=>{const{fresh:e}=m();return t(h,{onClick:e,children:"Fresh"})},"FreshButton"),he=r(()=>{const{isDispatched:e,isMounting:n,isRegistering:o,isQueued:l,isProcessing:s,isSyncing:x}=C();return u("div",{className:"flex flex-col space-y-1",children:[t("div",{className:"text-xs text-slate-500",children:"Events"}),u("div",{className:"grid grid-cols-2 gap-1",children:[t("div",{className:`${o?"animate-pulse bg-purple-400 text-purple-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"R"}),t("div",{className:`${n?"animate-pulse bg-amber-400 text-amber-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"M"}),t("div",{className:`${x?"animate-pulse bg-pink-400 text-pink-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"S"}),t("div",{className:`${e?"animate-pulse bg-sky-400 text-sky-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"D"}),t("div",{className:`${l?"animate-pulse bg-rose-400 text-rose-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"Q"}),t("div",{className:`${s?"animate-pulse bg-emerald-400 text-emerald-700":"bg-slate-100 text-slate-300"} text-xs px-2 p-1 relative z-20`,children:"P"})]})]})},"Statuses"),B=r(()=>{const[e,n,o]=le(),[l]=ce(),[s,x]=p.exports.useState("text.var");return t("div",{className:"py-4",children:u("div",{className:"p-2 border border-slate-300 flex relative",children:[t("div",{className:"absolute top-0 transform -translate-y-1/2 text-xs bg-white p-0.5 px-3 rounded-full border border-slate-300",children:"Controller debugger"}),u("div",{className:"flex space-x-4 mt-2 flex-1",children:[t(he,{}),u("div",{className:"flex flex-col space-y-1 w-96",children:[t("div",{className:"text-xs text-slate-500",children:"Actions"}),u("div",{className:"gap-1 grid grid-cols-3",children:[t(de,{}),t(ue,{}),t(pe,{}),t(ge,{}),t(xe,{}),t(me,{})]}),u("div",{className:"text-xs flex items-center space-x-2",children:[t("div",{className:"text-slate-500",children:"Update var:"}),t("input",{type:"text",value:s,onChange:g=>x(g.target.value),className:"bg-slate-100 border border-slate-200 p-1"}),t("input",{type:"text",value:`${o(s,"")}`,onChange:g=>{let a=g.target.value;isNaN(parseInt(a))||(a=parseInt(a)),a==="true"&&(a=!0),a==="false"&&(a=!1),n(s,a)},className:"bg-slate-100 border border-slate-200 p-1"})]}),u("div",{className:"text-xs flex items-center space-x-2",children:[t("div",{className:"text-slate-500",children:"instant var:"}),t("input",{type:"text",value:s,onChange:g=>x(g.target.value),className:"bg-slate-100 border border-slate-200 p-1"}),t("input",{type:"text",value:`${o(s,"")}`,onChange:g=>{let a=g.target.value;isNaN(parseInt(a))||(a=parseInt(a)),a==="true"&&(a=!0),a==="false"&&(a=!1),n(s,a,!0)},className:"bg-slate-100 border border-slate-200 p-1"})]})]}),u("div",{className:"flex flex-col space-y-1 flex-1",children:[t("div",{className:"text-xs text-slate-500",children:"State"}),t("div",{className:"bg-slate-100 w-full flex-1 p-2 text-xs overflow-auto",style:{maxHeight:100},children:t(P,{json:e})})]}),u("div",{className:"flex flex-col space-y-1 flex-1",children:[t("div",{className:"text-xs text-slate-500",children:"Exceptions"}),t("div",{className:"bg-slate-100 w-full flex-1 p-2 text-xs overflow-auto",style:{maxHeight:100},children:t(P,{json:l})})]})]})]})})},"Debugger");try{B.displayName="Debugger",B.__docgenInfo={description:"",displayName:"Debugger",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/components/Debugger/Debugger.tsx#Debugger"]={docgenInfo:B.__docgenInfo,name:"Debugger",path:"src/components/Debugger/Debugger.tsx#Debugger"})}catch{}function E(e){const n=r(o=>{const{...l}=o;return t(K,{children:t(e,{...l})})},"WrapperComponent");return n.displayName="useBridge(WrapperComponent)",n}r(E,"useBridge");try{E.displayName="useBridge",E.__docgenInfo={description:"",displayName:"useBridge",props:{}},typeof STORYBOOK_REACT_CLASSES<"u"&&(STORYBOOK_REACT_CLASSES["src/hocs/useBridge.tsx#useBridge"]={docgenInfo:E.__docgenInfo,name:"useBridge",path:"src/hocs/useBridge.tsx#useBridge"})}catch{}const be={title:"Controller",component:ie,parameters:{storySource:{source:`import { ComponentMeta, ComponentStory } from '@storybook/react'

import React from 'react'
import Controller from '../components/Controller/Controller'
import { Bridge } from '../expose'

export default {
  title: 'Controller',
  component: Controller,
  parameters: {
    // More on Story layout: https://storybook.js.org/docs/react/configure/story-layout
    layout: 'fullscreen',
  },
} as ComponentMeta<typeof Controller>

const Template: ComponentStory<typeof Controller> = (args) => <Controller {...args} />

export const ControllerComponent = ({ children }: any) => {
  return <Bridge>{children}</Bridge>
}
`,locationsMap:{"controller-component":{startLoc:{col:35,line:18},endLoc:{col:1,line:20},startBody:{col:35,line:18},endBody:{col:1,line:20}}}},layout:"fullscreen"}},Se=r(({children:e})=>t(K,{children:e}),"ControllerComponent"),_e=["ControllerComponent"];export{Se as ControllerComponent,_e as __namedExportsOrder,be as default};
//# sourceMappingURL=Controller.stories.0188067e.js.map
